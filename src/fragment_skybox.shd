#version 450

in vec3 tex_coords;

layout(location=0) out vec4 output_color;
layout(location=1) out vec4 bright_parts;

uniform samplerCube cubemap;
uniform sampler1D threshold;

//const float contrast = 1.5;

void main() {
    output_color = texture(cubemap, tex_coords);
    float luminance = dot(output_color.rgb, vec3(0.299, 0.587, 0.114));
    bright_parts = output_color * texture(threshold, luminance).r;
}
